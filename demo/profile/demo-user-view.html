<link rel="import" href="../../polymer/polymer-element.html">
<link rel="import" href="demo-profile.html">

<dom-module id="demo-user-view">
  <template>
    <style>
      :host {
        display: block;
      }
    </style>
    <b>Tracking: [[_getTrackingStatus(isTrackingEnable)]]</b>
    <h2>User View: (<span>hasChanged: [[isDirty]]</span>)</h2>
    <hr/>
    <div on-form-tracker-changed="_onChanged">
      <demo-profile></demo-profile>
    </div>
  </template>

  <script>
    class DemoUserView extends FormTrackerMixin(Polymer.Element) {
      static get is() { return 'demo-user-view'; }

      static get trackers() {
        return {
          hasChangedProp: 'isDirty',
          trackingEnableProp: 'isTrackingEnable',
        };
      }

      static get observers() {
        return ['_onHasChanged(isDirty)']
      }

      _onHasChanged(isDirty) {
        console.log('_onHasChanged(v)', isDirty);
      }

      _onChanged(e) {
        const {element} = e.detail;
        console.log(element._getModifiedPaths());
      }
    }

    window.customElements.define(DemoUserView.is, DemoUserView);
  </script>
</dom-module>
